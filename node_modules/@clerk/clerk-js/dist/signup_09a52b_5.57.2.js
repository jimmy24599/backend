"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["710"],{9817:function(e,i,t){t.r(i),t.d(i,{SignUp:()=>V,SignUpSSOCallback:()=>z,SignUpContinue:()=>Z,SignUpStart:()=>F,SignUpModal:()=>W,SignUpVerifyEmail:()=>B,SignUpVerifyPhone:()=>M});var r=t(9755),l=t(7351),a=t(9144),n=t(6663),o=t(5112),s=t(7298),d=t(3064),c=t(1058),u=t(7508),p=t(4676),m=t(6106),h=t(9037),v=t(2539),f=t(3423),g=t(5295);let b=e=>{var i,t,l,a,n,o,s,c,u,p,h,v,b,_;let{handleSubmit:y,fields:U,formState:A,canToggleEmailPhone:S,onlyLegalAcceptedMissing:C=!1,handleEmailPhoneToggle:N}=e,{showOptionalFields:E}=(0,d.useAppearance)().parsedLayout,Z=e=>{var i;return("emailAddress"===e||"phoneNumber"===e)&&S?!!U[e]:!!U[e]&&(E||(null===(i=U[e])||void 0===i?void 0:i.required))};return(0,r.BX)(m.Form.Root,{onSubmit:y,gap:8,children:[!C&&(0,r.BX)(d.Col,{gap:6,children:[(Z("firstName")||Z("lastName"))&&(0,r.BX)(m.Form.ControlRow,{elementId:"name",sx:{[g.mqu.sm]:{flexWrap:"wrap"}},children:[Z("firstName")&&(0,r.tZ)(m.Form.PlainInput,{...A.firstName.props,isRequired:null===(i=U.firstName)||void 0===i?void 0:i.required,isOptional:!(null===(t=U.firstName)||void 0===t?void 0:t.required)}),Z("lastName")&&(0,r.tZ)(m.Form.PlainInput,{...A.lastName.props,isRequired:null===(l=U.lastName)||void 0===l?void 0:l.required,isOptional:!(null===(a=U.lastName)||void 0===a?void 0:a.required)})]}),Z("username")&&(0,r.tZ)(m.Form.ControlRow,{elementId:"username",children:(0,r.tZ)(m.Form.PlainInput,{...A.username.props,isRequired:null===(n=U.username)||void 0===n?void 0:n.required,isOptional:!(null===(o=U.username)||void 0===o?void 0:o.required)})}),Z("emailAddress")&&(0,r.tZ)(m.Form.ControlRow,{elementId:"emailAddress",children:(0,r.tZ)(m.Form.PlainInput,{...A.emailAddress.props,isRequired:null===(s=U.emailAddress)||void 0===s?void 0:s.required,isOptional:!(null===(c=U.emailAddress)||void 0===c?void 0:c.required),isDisabled:null===(u=U.emailAddress)||void 0===u?void 0:u.disabled,actionLabel:S?(0,d.localizationKeys)("signUp.start.actionLink__use_phone"):void 0,onActionClicked:S?()=>N("phoneNumber"):void 0})}),Z("phoneNumber")&&(0,r.tZ)(m.Form.ControlRow,{elementId:"phoneNumber",children:(0,r.tZ)(m.Form.PhoneInput,{...A.phoneNumber.props,isRequired:null===(p=U.phoneNumber)||void 0===p?void 0:p.required,isOptional:!(null===(h=U.phoneNumber)||void 0===h?void 0:h.required),actionLabel:S?(0,d.localizationKeys)("signUp.start.actionLink__use_email"):void 0,onActionClicked:S?()=>N("emailAddress"):void 0})}),Z("password")&&(0,r.tZ)(m.Form.ControlRow,{elementId:"password",children:(0,r.tZ)(m.Form.PasswordInput,{...A.password.props,isRequired:null===(v=U.password)||void 0===v?void 0:v.required,isOptional:!(null===(b=U.password)||void 0===b?void 0:b.required)})})]}),(0,r.BX)(d.Col,{center:!0,children:[(0,r.tZ)(f.S,{}),(0,r.BX)(d.Col,{gap:6,sx:{width:"100%"},children:[Z("legalAccepted")&&(0,r.tZ)(m.Form.ControlRow,{elementId:"legalAccepted",children:(0,r.tZ)(m.LegalCheckbox,{...A.legalAccepted.props,isRequired:null===(_=U.legalAccepted)||void 0===_?void 0:_.required})}),(0,r.tZ)(m.Form.SubmitButton,{hasArrow:!0,localizationKey:(0,d.localizationKeys)("formButtonPrimary")})]})]})]})};var _=t(5027);let y=["emailAddress","phoneNumber","username","firstName","lastName","password","ticket","legalAccepted"];function U(e){return y.reduce((i,t)=>{let r=function(e,i){switch(e){case"emailAddress":return function(e){var i,t,r,l;let{attributes:a,hasTicket:n,hasEmail:o,activeCommIdentifierType:s,isProgressiveSignUp:d}=e;if(d){if(!((!n||n&&o)&&(null===(r=a.email_address)||void 0===r?void 0:r.enabled))||S(a,d)&&"emailAddress"!==s)return;return{required:!!(null===(l=a.email_address)||void 0===l?void 0:l.required),disabled:!!n&&!!o}}if((!n||n&&o)&&(null===(i=a.email_address)||void 0===i?void 0:i.enabled)&&(null===(t=a.email_address)||void 0===t?void 0:t.used_for_first_factor)&&"emailAddress"===s)return{required:!0,disabled:!!n&&!!o}}(i);case"phoneNumber":return function(e){var i,t,r;let{attributes:l,hasTicket:a,activeCommIdentifierType:n,isProgressiveSignUp:o}=e;if(o){if(!(null===(t=l.phone_number)||void 0===t?void 0:t.enabled)||S(l,o)&&"phoneNumber"!==n)return;return{required:!!(null===(r=l.phone_number)||void 0===r?void 0:r.required)}}if(!a&&(null===(i=l.phone_number)||void 0===i?void 0:i.enabled)&&l.phone_number.used_for_first_factor&&"phoneNumber"===n)return{required:!0}}(i);case"password":return function(e){var i,t;if((null===(i=e.password)||void 0===i?void 0:i.enabled)&&e.password.required)return{required:!!(null===(t=e.password)||void 0===t?void 0:t.required)}}(i.attributes);case"ticket":return function(e){if(e)return{required:!0}}(i.hasTicket);case"legalAccepted":return function(e){if(e)return{required:!0}}(i.legalConsentRequired);case"username":case"firstName":case"lastName":return function(e,i){var t,r;let l=(0,_.a1)(e);if(null===(t=i[l])||void 0===t?void 0:t.enabled)return{required:null===(r=i[l])||void 0===r?void 0:r.required}}(e,i.attributes);default:return}}(t,e);return r&&(i[t]=r),i},{})}let A=(e,i)=>{if(S(e,i))return"emailAddress";let{email_address:t,phone_number:r}=e;return((null==t?void 0:t.enabled)&&i?t.required:null==t?void 0:t.used_for_first_factor)?"emailAddress":((null==r?void 0:r.enabled)&&i?r.required:null==r?void 0:r.used_for_first_factor)?"phoneNumber":null};function S(e,i){let{email_address:t,phone_number:r}=e;return!!(i?(null==t?void 0:t.enabled)&&(null==r?void 0:r.enabled)&&!t.required&&!r.required:(null==t?void 0:t.used_for_first_factor)&&(null==r?void 0:r.used_for_first_factor))}var C=t(138);let N=a.memo(e=>{let i=(0,l.cL)(),{navigate:t}=(0,p.useRouter)(),a=(0,m.useCardState)(),n=(0,s.useSignUpContext)(),o=(0,s.useCoreSignUp)(),d=n.ssoCallbackUrl,c=n.afterSignUpUrl||"/",{continueSignUp:u=!1,...h}=e;return(0,r.tZ)(C.L,{...h,oauthCallback:i=>o.authenticateWithRedirect({continueSignUp:u,redirectUrl:d,redirectUrlComplete:c,strategy:i,unsafeMetadata:n.unsafeMetadata,legalAccepted:e.legalAccepted}).catch(e=>(0,v.S3)(e,[],a.setError)),web3Callback:r=>i.authenticateWithWeb3({customNavigate:t,redirectUrl:c,signUpContinueUrl:"continue",unsafeMetadata:n.unsafeMetadata,strategy:r,legalAccepted:e.legalAccepted}).catch(e=>(0,v.Ht)(e,a.setError))})});var E=t(5756);let Z=(0,m.withCardStateProvider)(function(){var e,i;let t=(0,h.v)(),n=(0,l.cL)(),{navigate:o}=(0,p.useRouter)(),{displayConfig:c,userSettings:u}=(0,s.useEnvironment)(),{attributes:f,usernameSettings:g}=u,{t:_,locale:y}=(0,d.useLocalizations)(),{afterSignUpUrl:C,signInUrl:Z,unsafeMetadata:I,initialValues:z={},isCombinedFlow:R}=(0,s.useSignUpContext)(),L=(0,s.useCoreSignUp)(),K=!!a.useContext(s.SignInContext),k=!!(R&&K),w=u.signUp.progressive,[F,P]=a.useState(A(f,u.signUp.progressive)),T={firstName:(0,v.Yp)("firstName",z.firstName||"",{type:"text",label:(0,d.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,v.Yp)("lastName",z.lastName||"",{type:"text",label:(0,d.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,v.Yp)("emailAddress",z.emailAddress||L.emailAddress||"",{type:"email",label:(0,d.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,v.Yp)("username",z.username||"",{type:"text",label:(0,d.localizationKeys)("formFieldLabel__username"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__username"),transformer:e=>e.trim(),buildErrorMessage:e=>(0,v.fq)(e,{t:_,locale:y,usernameSettings:g})}),phoneNumber:(0,v.Yp)("phoneNumber",z.phoneNumber||"",{type:"tel",label:(0,d.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),password:(0,v.Yp)("password","",{type:"password",label:(0,d.localizationKeys)("formFieldLabel__password"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0}),legalAccepted:(0,v.Yp)("legalAccepted","",{type:"checkbox",label:"",defaultChecked:!1,isRequired:u.signUp.legal_consent_enabled||!1})},q=(0,a.useMemo)(()=>L.missingFields&&1===L.missingFields.length&&"legal_accepted"===L.missingFields[0]&&L.unverifiedFields&&0===L.unverifiedFields.length,[L.missingFields,L.unverifiedFields]);if((0,a.useEffect)(()=>{L.id||o(c.signUpUrl)},[]),!L.id)return(0,r.tZ)(m.LoadingCard,{});let O=!!T.emailAddress.value,B=(null===(i=L.verifications)||void 0===i?void 0:null===(e=i.externalAccount)||void 0===e?void 0:e.status)=="verified",x=U({attributes:f,hasEmail:O,activeCommIdentifierType:F,signUp:L,isProgressiveSignUp:w,legalConsentRequired:u.signUp.legal_consent_enabled});!function(e,i){if(i){var t,r,l,a,n,o,s,d;let c=!!i.emailAddress,u=(null===(r=i.verifications)||void 0===r?void 0:null===(t=r.emailAddress)||void 0===t?void 0:t.status)==="verified",p=(null===(a=i.verifications)||void 0===a?void 0:null===(l=a.phoneNumber)||void 0===l?void 0:l.status)==="verified",m=(null===(o=i.verifications)||void 0===o?void 0:null===(n=o.externalAccount)||void 0===n?void 0:n.status)==="verified",h=(null===(d=i.verifications)||void 0===d?void 0:null===(s=d.web3Wallet)||void 0===s?void 0:s.status)==="verified",v=null!==i.legalAcceptedAt;c&&u&&delete e.emailAddress,p&&delete e.phoneNumber,(m||h)&&delete e.password,i.firstName&&delete e.firstName,i.lastName&&delete e.lastName,i.username&&delete e.username,v&&delete e.legalAccepted,Object.entries(e).forEach(i=>{let[t,r]=i;r&&!r.required&&delete e[t]})}}(x,L);let M=u.authenticatableSocialStrategies,D=async e=>{var i,r;e.preventDefault();let l=Object.entries(x).reduce((e,i)=>{let[t,r]=i;return[...e,...r&&T[t]?[T[t]]:[]]},[]);I&&l.push({id:"unsafeMetadata",value:I});let a=!!(null===(i=l.find(e=>"emailAddress"===e.id))||void 0===i?void 0:i.value),s=!!(null===(r=l.find(e=>"phoneNumber"===e.id))||void 0===r?void 0:r.value);return L.missingFields.includes("email_address")&&L.missingFields.includes("phone_number")&&!a&&!s&&S(f,w)&&(l.push(T.emailAddress),l.push(T.phoneNumber)),t.setLoading(),t.setError(void 0),L.update((0,v.ni)(l)).then(e=>(0,E.v)({signUp:e,verifyEmailPath:"./verify-email-address",verifyPhonePath:"./verify-phone-number",handleComplete:()=>n.setActive({session:e.createdSessionId,redirectUrl:C}),navigate:o})).catch(e=>(0,v.S3)(e,l,t.setError)).finally(()=>t.setIdle())},X=S(f,w),H=!B&&M.length>0,V=q?(0,d.localizationKeys)("signUp.legalConsent.continue.title"):(0,d.localizationKeys)("signUp.continue.title"),W=q?(0,d.localizationKeys)("signUp.legalConsent.continue.subtitle"):(0,d.localizationKeys)("signUp.continue.subtitle");return(0,r.tZ)(d.Flow.Part,{part:"complete",children:(0,r.BX)(m.Card.Root,{children:[(0,r.BX)(m.Card.Content,{children:[(0,r.BX)(m.Header.Root,{showLogo:!0,children:[(0,r.tZ)(m.Header.Title,{localizationKey:V}),(0,r.tZ)(m.Header.Subtitle,{localizationKey:W})]}),(0,r.tZ)(m.Card.Alert,{children:t.error}),(0,r.tZ)(d.Flex,{direction:"col",elementDescriptor:d.descriptors.main,gap:8,children:(0,r.BX)(m.SocialButtonsReversibleContainerWithDivider,{children:[H&&!q&&(0,r.tZ)(N,{enableOAuthProviders:H,enableWeb3Providers:!1,continueSignUp:!0}),(0,r.tZ)(b,{handleSubmit:D,fields:x,formState:T,onlyLegalAcceptedMissing:q,canToggleEmailPhone:X,handleEmailPhoneToggle:e=>{S(f,w)&&P(e)}})]})})]}),(0,r.tZ)(m.Card.Footer,{children:k?null:(0,r.BX)(m.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(m.Card.ActionText,{localizationKey:(0,d.localizationKeys)("signUp.continue.actionText")}),(0,r.tZ)(m.Card.ActionLink,{localizationKey:(0,d.localizationKeys)("signUp.continue.actionLink"),to:k?"../../":n.buildUrlWithAuth(Z)})]})})]})})});var I=t(8969);let z=(0,I.sN)(I.L);var R=t(753),L=t(4029),K=t(3234),k=t(5995);let w=()=>{let e=(0,l.cL)(),i=(0,h.v)(),{navigate:t}=(0,p.useRouter)(),{signInUrl:a,waitlistUrl:n}=(0,s.useSignUpContext)(),o=(0,K.H)(),{userSettings:c}=(0,s.useEnvironment)(),{mode:u}=c.signUp,v=async()=>{await t(e.buildUrlWithAuth(n))},f=u===R.ci.RESTRICTED?(0,d.localizationKeys)("signUp.restrictedAccess.subtitle"):(0,d.localizationKeys)("signUp.restrictedAccess.subtitleWaitlist");return(0,r.BX)(m.Card.Root,{children:[(0,r.BX)(m.Card.Content,{children:[(0,r.BX)(m.Header.Root,{showLogo:!0,children:[(0,r.tZ)(d.Icon,{icon:k.gO,sx:e=>({margin:"auto",width:e.sizes.$10,height:e.sizes.$10})}),(0,r.tZ)(m.Header.Title,{localizationKey:(0,d.localizationKeys)("signUp.restrictedAccess.title")}),(0,r.tZ)(m.Header.Subtitle,{localizationKey:f})]}),(0,r.tZ)(m.Card.Alert,{children:i.error}),u===R.ci.RESTRICTED&&o&&(0,r.tZ)(d.Flex,{direction:"col",gap:4,children:(0,r.tZ)(d.Button,{localizationKey:(0,d.localizationKeys)("signUp.restrictedAccess.blockButton__emailSupport"),onClick:()=>{window.location.href="mailto:".concat(o)}})}),u===R.ci.WAITLIST&&(0,r.tZ)(d.Flex,{direction:"col",gap:4,children:(0,r.tZ)(d.Button,{localizationKey:(0,d.localizationKeys)("signUp.restrictedAccess.blockButton__joinWaitlist"),onClick:v})})]}),(0,r.tZ)(m.Card.Footer,{children:(0,r.BX)(m.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(m.Card.ActionText,{localizationKey:(0,d.localizationKeys)("signUp.restrictedAccess.actionText")}),(0,r.tZ)(m.Card.ActionLink,{localizationKey:(0,d.localizationKeys)("signUp.restrictedAccess.actionLink"),to:e.buildUrlWithAuth(a)})]})})]})},F=(0,I.sN)((0,m.withCardStateProvider)(function(){let e=(0,h.v)(),i=(0,l.cL)(),t=(0,c._m)(),n=(0,s.useCoreSignUp)(),{showOptionalFields:o}=(0,d.useAppearance)().parsedLayout,{userSettings:u}=(0,s.useEnvironment)(),{navigate:g}=(0,p.useRouter)(),{attributes:_}=u,{setActive:y}=(0,l.cL)(),C=(0,s.useSignUpContext)(),Z=!!a.useContext(s.SignInContext),{afterSignUpUrl:I,signInUrl:z,unsafeMetadata:K}=C,k=!!(C.isCombinedFlow&&Z),[F,P]=a.useState(A(_,u.signUp.progressive)),{t:T,locale:q}=(0,d.useLocalizations)(),O=C.initialValues||{},[B,x]=a.useState(!1),{userSettings:{passwordSettings:M,usernameSettings:D}}=(0,s.useEnvironment)(),{mode:X}=u.signUp,H={firstName:(0,v.Yp)("firstName",n.firstName||O.firstName||"",{type:"text",label:(0,d.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,v.Yp)("lastName",n.lastName||O.lastName||"",{type:"text",label:(0,d.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,v.Yp)("emailAddress",n.emailAddress||O.emailAddress||"",{type:"email",label:(0,d.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,v.Yp)("username",n.username||O.username||"",{type:"text",label:(0,d.localizationKeys)("formFieldLabel__username"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__username"),transformer:e=>e.trim(),buildErrorMessage:e=>(0,v.fq)(e,{t:T,locale:q,usernameSettings:D})}),phoneNumber:(0,v.Yp)("phoneNumber",n.phoneNumber||O.phoneNumber||"",{type:"tel",label:(0,d.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),legalAccepted:(0,v.Yp)("legalAccepted","",{type:"checkbox",label:"",defaultChecked:!1,isRequired:u.signUp.legal_consent_enabled||!1}),password:(0,v.Yp)("password","",{type:"password",label:(0,d.localizationKeys)("formFieldLabel__password"),placeholder:(0,d.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0,buildErrorMessage:e=>(0,v.GM)(e,{t:T,locale:q,passwordSettings:M})}),ticket:(0,v.Yp)("ticket",(0,L.X)("__clerk_ticket")||(0,L.X)("__clerk_invitation_token")||"")},V=!!H.ticket.value,W=!!H.emailAddress.value,Y=u.signUp.progressive,j=U({attributes:_,hasTicket:V,hasEmail:W,activeCommIdentifierType:F,isProgressiveSignUp:Y,legalConsentRequired:u.signUp.legal_consent_enabled}),G=()=>{H.ticket.value&&(t.setLoading(),e.setLoading(),n.create({strategy:"ticket",ticket:H.ticket.value}).then(e=>(H.emailAddress.setValue(e.emailAddress||""),"missing_requirements"===e.status&&x(!0),(0,E.v)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>((0,L.x)("__clerk_ticket"),(0,L.x)("__clerk_invitation_token"),y({session:e.createdSessionId,redirectUrl:I})),navigate:g}))).catch(i=>{H.ticket.setValue(""),(0,v.S3)(i,[],e.setError)}).finally(()=>{t.setIdle(),e.setIdle()}))};a.useLayoutEffect(()=>{G()},[]),a.useEffect(()=>{(async function(){let i=n.verifications.externalAccount.error;if(i){switch(i.code){case R.O1.NOT_ALLOWED_TO_SIGN_UP:case R.O1.OAUTH_ACCESS_DENIED:case R.O1.NOT_ALLOWED_ACCESS:case R.O1.SAML_USER_ATTRIBUTE_MISSING:case R.O1.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case R.O1.USER_LOCKED:case R.O1.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:case R.O1.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:case R.O1.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:case R.O1.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:case R.O1.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:case R.O1.CAPTCHA_INVALID:e.setError(i);break;default:e.setError("Unable to complete action at this time. If the problem persists please contact support.")}await n.create({})}})()},[]);let $=async i=>{var t,r;let l;i.preventDefault();let a=Object.entries(j).reduce((e,i)=>{let[t,r]=i;return e.push(...r&&H[t]?[H[t]]:[]),e},[]);if(K&&a.push({id:"unsafeMetadata",value:K}),j.ticket){let e=()=>{};a.push({id:"strategy",value:"ticket",clearFeedback:e,setValue:e,onChange:e,setError:e})}let o=!!(null===(t=a.find(e=>"emailAddress"===e.id))||void 0===t?void 0:t.value),s=!!(null===(r=a.find(e=>"phoneNumber"===e.id))||void 0===r?void 0:r.value);!o&&!s&&S(_,Y)&&(a.push(H.emailAddress),a.push(H.phoneNumber)),e.setLoading(),e.setError(void 0);let d=C.ssoCallbackUrl,c=C.afterSignUpUrl||"/";return(j.ticket?n.upsert((0,v.ni)(a)):n.create((0,v.ni)(a))).then(e=>(0,E.v)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>y({session:e.createdSessionId,redirectUrl:I}),navigate:g,redirectUrl:d,redirectUrlComplete:c})).catch(i=>(0,v.S3)(i,a,e.setError)).finally(()=>e.setIdle())};if(t.isLoading)return(0,r.tZ)(m.LoadingCard,{});let Q=S(_,Y),J=Object.entries(j).filter(e=>{let[i,t]=e;return o||(null==t?void 0:t.required)}),ee=function(e){let{authenticatableSocialStrategies:i,web3FirstFactors:t}=e;return e.hasValidAuthFactor||!i.length&&!t.length}(u)&&J.length>0,ei=(!V||B)&&u.authenticatableSocialStrategies.length>0,et=!V&&u.web3FirstFactors.length>0;return X===R.ci.PUBLIC||V?(0,r.tZ)(d.Flow.Part,{part:"start",children:(0,r.BX)(m.Card.Root,{children:[(0,r.BX)(m.Card.Content,{children:[(0,r.BX)(m.Header.Root,{showLogo:!0,children:[(0,r.tZ)(m.Header.Title,{localizationKey:k?(0,d.localizationKeys)("signUp.start.titleCombined"):(0,d.localizationKeys)("signUp.start.title")}),(0,r.tZ)(m.Header.Subtitle,{localizationKey:k?(0,d.localizationKeys)("signUp.start.subtitleCombined"):(0,d.localizationKeys)("signUp.start.subtitle")})]}),(0,r.tZ)(m.Card.Alert,{children:e.error}),(0,r.BX)(d.Flex,{direction:"col",elementDescriptor:d.descriptors.main,gap:6,children:[(0,r.BX)(m.SocialButtonsReversibleContainerWithDivider,{children:[(ei||et)&&(0,r.tZ)(N,{enableOAuthProviders:ei,enableWeb3Providers:et,continueSignUp:B,legalAccepted:!!H.legalAccepted.checked||void 0}),ee&&(0,r.tZ)(b,{handleSubmit:$,fields:j,formState:H,canToggleEmailPhone:Q,handleEmailPhoneToggle:e=>{S(_,Y)&&P(e)}})]}),!ee&&(0,r.tZ)(f.S,{})]})]}),(0,r.tZ)(m.Card.Footer,{children:(0,r.BX)(m.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(m.Card.ActionText,{localizationKey:(0,d.localizationKeys)("signUp.start.actionText")}),(0,r.tZ)(m.Card.ActionLink,{localizationKey:(0,d.localizationKeys)("signUp.start.actionLink"),to:k?"../":i.buildUrlWithAuth(z)})]})})]})}):(0,r.tZ)(w,{})})),P=e=>{let{afterSignUpUrl:i}=(0,s.useSignUpContext)(),{setActive:t}=(0,l.cL)(),{navigate:a}=(0,p.useRouter)();return(0,r.tZ)(m.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,l,n)=>{e.attempt(r).then(async e=>(await l(),(0,E.v)({signUp:e,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",continuePath:"../continue",handleComplete:()=>t({session:e.createdSessionId,redirectUrl:i}),navigate:a}))).catch(e=>n(e))},onResendCodeClicked:e.prepare,safeIdentifier:e.safeIdentifier,onIdentityPreviewEditClicked:()=>a("../")})},T=()=>{let e=(0,s.useCoreSignUp)(),i=(0,m.useCardState)(),t=e.verifications.emailAddress.status,l=!e.status||"verified"===t;return(0,c.ib)(l?void 0:()=>e.prepareEmailAddressVerification({strategy:"email_code"}).catch(e=>(0,v.S3)(e,[],i.setError)),{name:"prepare",strategy:"email_code",number:e.emailAddress},{staleTime:100}),(0,r.tZ)(d.Flow.Part,{part:"emailCode",children:(0,r.tZ)(P,{cardTitle:(0,d.localizationKeys)("signUp.emailCode.title"),cardSubtitle:(0,d.localizationKeys)("signUp.emailCode.subtitle"),inputLabel:(0,d.localizationKeys)("signUp.emailCode.formSubtitle"),resendButton:(0,d.localizationKeys)("signUp.emailCode.resendButton"),prepare:()=>{if(!l)return e.prepareEmailAddressVerification({strategy:"email_code"}).catch(e=>(0,v.S3)(e,[],i.setError))},attempt:i=>e.attemptEmailAddressVerification({code:i}),safeIdentifier:e.emailAddress})})};var q=t(4814);let O=()=>{let{t:e}=(0,d.useLocalizations)(),i=(0,s.useCoreSignUp)(),t=(0,s.useSignUpContext)(),{afterSignUpUrl:n}=t,o=(0,h.v)(),{navigate:c}=(0,p.useRouter)(),{setActive:u}=(0,l.cL)(),[f,g]=a.useState(!1),{startEmailLinkFlow:b,cancelEmailLinkFlow:_}=(0,q.E)(i);a.useEffect(()=>{y()},[]);let y=()=>b({redirectUrl:t.emailLinkRedirectUrl}).then(e=>U(e)).catch(e=>{(0,v.S3)(e,[],o.setError)}),U=async i=>{let t=i.verifications.emailAddress;"expired"===t.status?o.setError(e((0,d.localizationKeys)("formFieldError__verificationLinkExpired"))):t.verifiedFromTheSameClient()?g(!0):await (0,E.v)({signUp:i,continuePath:"../continue",verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",handleComplete:()=>u({session:i.createdSessionId,redirectUrl:n}),navigate:c})};return f?(0,r.tZ)(I.Ej,{title:(0,d.localizationKeys)("signUp.emailLink.verifiedSwitchTab.title"),subtitle:(0,d.localizationKeys)("signUp.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,r.tZ)(d.Flow.Part,{part:"emailLink",children:(0,r.tZ)(m.VerificationLinkCard,{cardTitle:(0,d.localizationKeys)("signUp.emailLink.title"),cardSubtitle:(0,d.localizationKeys)("signUp.emailLink.subtitle"),formTitle:(0,d.localizationKeys)("signUp.emailLink.formTitle"),formSubtitle:(0,d.localizationKeys)("signUp.emailLink.formSubtitle"),resendButton:(0,d.localizationKeys)("signUp.emailLink.resendButton"),onResendCodeClicked:()=>{_(),y()},safeIdentifier:i.emailAddress})})},B=(0,m.withCardStateProvider)(()=>{var e,i;let{userSettings:t}=(0,s.useEnvironment)(),{attributes:l}=t;return(null===(i=l.email_address)||void 0===i?void 0:null===(e=i.verifications)||void 0===e?void 0:e.includes("email_link"))?(0,r.tZ)(O,{}):(0,r.tZ)(T,{})}),x=(0,m.withCardStateProvider)(()=>{let e=(0,s.useCoreSignUp)(),i=(0,m.useCardState)(),t=e.verifications.phoneNumber.status,l=!e.status||"verified"===t;return(0,c.ib)(l?void 0:()=>e.preparePhoneNumberVerification({strategy:"phone_code"}).catch(e=>(0,v.S3)(e,[],i.setError)),{name:"signUp.preparePhoneNumberVerification",strategy:"phone_code",number:e.phoneNumber},{staleTime:100}),(0,r.tZ)(d.Flow.Part,{part:"phoneCode",children:(0,r.tZ)(P,{cardTitle:(0,d.localizationKeys)("signUp.phoneCode.title"),cardSubtitle:(0,d.localizationKeys)("signUp.phoneCode.subtitle"),resendButton:(0,d.localizationKeys)("signUp.phoneCode.resendButton"),prepare:()=>{if(!l)return e.preparePhoneNumberVerification({strategy:"phone_code"}).catch(e=>(0,v.S3)(e,[],i.setError))},attempt:i=>e.attemptPhoneNumberVerification({code:i}),safeIdentifier:e.phoneNumber})})}),M=()=>(0,r.tZ)(x,{}),D=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.ib)(e?u.q3:void 0,"preloadComponent",{staleTime:1/0})};function X(){let e=(0,l.cL)();return a.useEffect(()=>{e.redirectToSignUp()},[]),null}function H(){let{__internal_setComponentNavigationContext:e}=(0,l.cL)(),{navigate:i,indexPath:t}=(0,p.useRouter)(),c=(0,s.useSignUpContext)();return D(c.withSessionTasks),a.useEffect(()=>null==e?void 0:e({indexPath:t,navigate:i}),[t,i]),(0,r.tZ)(d.Flow.Root,{flow:"signUp",children:(0,r.BX)(p.Switch,{children:[(0,r.tZ)(p.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.tZ)(B,{})}),(0,r.tZ)(p.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.tZ)(M,{})}),(0,r.tZ)(p.Route,{path:"sso-callback",children:(0,r.tZ)(z,{signUpUrl:c.signUpUrl,signInUrl:c.signInUrl,signUpForceRedirectUrl:c.afterSignUpUrl,signInForceRedirectUrl:c.afterSignInUrl,secondFactorUrl:c.secondFactorUrl,continueSignUpUrl:"../continue",verifyEmailAddressUrl:"../verify-email-address",verifyPhoneNumberUrl:"../verify-phone-number"})}),(0,r.tZ)(p.Route,{path:"verify",children:(0,r.tZ)(o.$,{redirectUrlComplete:c.afterSignUpUrl,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number"})}),(0,r.BX)(p.Route,{path:"continue",children:[(0,r.tZ)(p.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.tZ)(B,{})}),(0,r.tZ)(p.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.tZ)(M,{})}),(0,r.tZ)(p.Route,{index:!0,children:(0,r.tZ)(Z,{})})]}),c.withSessionTasks&&(0,r.tZ)(p.Route,{path:n.m.org,children:(0,r.tZ)(u.tM,{task:"org",redirectUrlComplete:c.afterSignUpUrl})}),(0,r.tZ)(p.Route,{index:!0,children:(0,r.tZ)(F,{})}),(0,r.tZ)(p.Route,{children:(0,r.tZ)(X,{})})]})})}H.displayName="SignUp";let V=(0,s.withCoreSessionSwitchGuard)(H),W=e=>{let i={signInUrl:"/".concat(p.VIRTUAL_ROUTER_BASE_PATH,"/sign-in"),waitlistUrl:"/".concat(p.VIRTUAL_ROUTER_BASE_PATH,"/waitlist"),...e};return(0,r.tZ)(p.Route,{path:"sign-up",children:(0,r.tZ)(s.SignUpContext.Provider,{value:{componentName:"SignUp",...i,routing:"virtual",mode:"modal"},children:(0,r.tZ)("div",{children:(0,r.tZ)(V,{...i,routing:"virtual"})})})})}},6052:function(e,i,t){t.r(i),t.d(i,{completeSignUpFlow:()=>r.v});var r=t(5756)}}]);