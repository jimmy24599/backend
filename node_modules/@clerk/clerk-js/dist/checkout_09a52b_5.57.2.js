(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["237"],{3470:function(e,t,n){"use strict";n.r(t),n.d(t,{__experimental_Checkout:()=>R});var r,o=n(9755),i=n(1673),c=n(7298),a=n(3064),u=n(6106),s=n(4676),l="https://js.stripe.com/v3",d=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,p=function(){for(var e=document.querySelectorAll('script[src^="'.concat(l,'"]')),t=0;t<e.length;t++){var n=e[t];if(d.test(n.src))return n}return null},m=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(l).concat(t);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},f=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:t})},h=null,y=null,g=null,v=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return f(r,n),r},b=!1,S=function(){return r?r:r=(null!==h?h:(h=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var n,r=p();r?r&&null!==g&&null!==y&&(r.removeEventListener("load",g),r.removeEventListener("error",y),null===(n=r.parentNode)||void 0===n||n.removeChild(r),r=m(null)):r=m(null),g=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},y=function(){t(Error("Failed to load Stripe.js"))},r.addEventListener("load",g),r.addEventListener("error",y)}catch(e){t(e);return}})).catch(function(e){return h=null,Promise.reject(e)})).catch(function(e){return r=null,Promise.reject(e)})};Promise.resolve().then(function(){return S()}).catch(function(e){b||console.warn(e)});var C=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];b=!0;var r=Date.now();return S().then(function(e){return v(e,t,r)})},k=n(9144),E=n(1058),w=n(5995);let x=e=>{let{checkout:t}=e,{setIsOpen:n}=(0,c.useCheckoutContext)();return(0,o.BX)(o.HY,{children:[(0,o.tZ)(u.Drawer.Body,{children:(0,o.BX)(a.Span,{elementDescriptor:a.descriptors.checkoutSuccessRoot,sx:e=>({margin:"auto",position:"relative",aspectRatio:"1/1",display:"grid",width:"100%",padding:e.space.$4,flexShrink:0}),children:[(0,o.tZ)(P,{scale:1}),(0,o.tZ)(P,{scale:.75}),(0,o.tZ)(P,{scale:.5}),(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.checkoutSuccessBadge,sx:e=>({margin:"auto",gridArea:"1/1",display:"flex",position:"relative",width:e.sizes.$16,height:e.sizes.$16,borderRadius:e.radii.$circle,backgroundImage:"linear-gradient(180deg, rgba(255, 255, 255, 0.30) 0%, rgba(0, 0, 0, 0.12) 50%, rgba(0, 0, 0, 0.30) 95.31%)",boxShadow:"0px 4px 12px 0px rgba(0, 0, 0, 0.35), 0px 1px 0px 0px rgba(255, 255, 255, 0.05) inset",":before":{content:'""',position:"absolute",inset:e.space.$1,borderRadius:e.radii.$circle,backgroundColor:e.colors.$colorBackground}}),children:(0,o.tZ)(a.Icon,{icon:w.Jr,colorScheme:"neutral",sx:{position:"relative",margin:"auto"},"aria-hidden":!0})}),(0,o.BX)(a.Span,{sx:e=>({margin:"auto",gridArea:"1/1",position:"relative",textAlign:"center",transform:"translateY(".concat(e.space.$20,")")}),children:[(0,o.tZ)(a.Heading,{elementDescriptor:a.descriptors.checkoutSuccessTitle,as:"h2",textVariant:"h2",children:"Payment was successful!"}),(0,o.tZ)(a.Text,{elementDescriptor:a.descriptors.checkoutSuccessDescription,colorScheme:"secondary",sx:e=>({textAlign:"center",paddingInline:e.space.$8,marginBlockStart:e.space.$2}),children:"Minim adipisicing enim fugiat enim est ad nisi exercitation nisi exercitation quis culpa."})]})]})}),(0,o.BX)(u.Drawer.Footer,{sx:e=>({rowGap:e.space.$4}),children:[(0,o.BX)(u.LineItems.Root,{children:[(0,o.BX)(u.LineItems.Group,{variant:"secondary",children:[(0,o.tZ)(u.LineItems.Title,{title:"Total paid"}),(0,o.tZ)(u.LineItems.Description,{text:t.invoice?"".concat(t.invoice.totals.grandTotal.currencySymbol).concat(t.invoice.totals.grandTotal.amountFormatted):"–"})]}),(0,o.BX)(u.LineItems.Group,{variant:"secondary",children:[(0,o.tZ)(u.LineItems.Title,{title:"Payment method"}),(0,o.tZ)(u.LineItems.Description,{text:t.paymentSource?"".concat(t.paymentSource.cardType," ⋯ ").concat(t.paymentSource.last4):"–"})]}),(0,o.BX)(u.LineItems.Group,{variant:"tertiary",children:[(0,o.tZ)(u.LineItems.Title,{title:"Invoice ID"}),(0,o.tZ)(u.LineItems.Description,{text:t.invoice?t.invoice.id:"–"})]})]}),(0,o.tZ)(a.Button,{onClick:()=>{n&&n(!1)},localizationKey:(0,a.localizationKeys)("formButtonPrimary")})]})]})};function P(e){let{scale:t}=e;return(0,o.tZ)(a.Span,{elementDescriptor:a.descriptors.checkoutSuccessRing,sx:e=>({margin:"auto",gridArea:"1/1",width:"".concat(100*t,"%"),height:"".concat(100*t,"%"),borderWidth:1,borderStyle:"solid",borderColor:e.colors.$neutralAlpha200,borderRadius:e.radii.$circle,maskImage:"linear-gradient(to bottom, transparent 15%, black, transparent 85%)"})})}var B=n(7351),I=n(9386),D=n(5295),Z=n(2539);let O=e=>{let{stripe:t,checkout:n,onCheckoutComplete:r}=e,{plan:i,planPeriod:c,totals:s}=n;return(0,o.BX)(u.Drawer.Body,{children:[(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.checkoutFormLineItemsRoot,sx:e=>({padding:e.space.$4,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100}),children:(0,o.BX)(u.LineItems.Root,{children:[(0,o.BX)(u.LineItems.Group,{children:[(0,o.tZ)(u.LineItems.Title,{title:i.name}),(0,o.tZ)(u.LineItems.Description,{text:"".concat(i.currencySymbol," ").concat("month"===c?i.amountFormatted:i.annualMonthlyAmountFormatted),suffix:"per month".concat("annual"===c?", times 12 months":"")})]}),(0,o.BX)(u.LineItems.Group,{borderTop:!0,variant:"tertiary",children:[(0,o.tZ)(u.LineItems.Title,{title:"Subtotal"}),(0,o.tZ)(u.LineItems.Description,{text:"".concat(s.subtotal.currencySymbol," ").concat(s.subtotal.amountFormatted)})]}),(0,o.BX)(u.LineItems.Group,{variant:"tertiary",children:[(0,o.tZ)(u.LineItems.Title,{title:"Tax"}),(0,o.tZ)(u.LineItems.Description,{text:"".concat(s.taxTotal.currencySymbol," ").concat(s.taxTotal.amountFormatted)})]}),(0,o.BX)(u.LineItems.Group,{borderTop:!0,children:[(0,o.tZ)(u.LineItems.Title,{title:"Total".concat(s.totalDueNow?" Due Today":"")}),(0,o.tZ)(u.LineItems.Description,{text:"".concat(s.totalDueNow?"".concat(s.totalDueNow.currencySymbol).concat(s.totalDueNow.amountFormatted):"".concat(s.grandTotal.currencySymbol).concat(s.grandTotal.amountFormatted))})]})]})}),t&&(0,o.tZ)(I.Elements,{stripe:t,options:{clientSecret:n.externalClientSecret},children:(0,o.tZ)(j,{checkout:n,onCheckoutComplete:r})})]})},j=e=>{let{checkout:t,onCheckoutComplete:n}=e,r=(0,I.useStripe)(),i=(0,I.useElements)(),{__experimental_commerce:c}=(0,B.cL)(),[s,l]=(0,k.useState)(!0),[d,p]=(0,k.useState)(!0),[m,f]=(0,k.useState)(!1),[h,y]=(0,k.useState)(),{data:g}=(0,E.ib)(null==c?void 0:c.getPaymentSources,{}),{data:v}=g||{data:[]},b=(0,k.useCallback)(()=>{l(!1)},[]),S=async e=>{let{paymentSourceId:r}=e;return t.confirm({paymentSourceId:r}).then(e=>{n(e)}).catch(e=>{throw e})},C=async e=>{e.preventDefault(),f(!0),y(void 0);let t=new FormData(e.currentTarget).get("payment_source_id");try{await S({paymentSourceId:t})}catch(e){(0,Z.S3)(e,[],y)}finally{f(!1)}},w=async e=>{if(e.preventDefault(),r&&i){f(!0),y(void 0);try{let{setupIntent:e,error:t}=await r.confirmSetup({elements:i,confirmParams:{return_url:""},redirect:"if_required"});if(t)return;let n=await c.addPaymentSource({gateway:"stripe",paymentMethod:"card",paymentToken:e.payment_method});await S({paymentSourceId:n.id})}catch(e){console.log(e),(0,Z.S3)(e,[],y)}finally{f(!1)}}};return(0,o.BX)(a.Col,{elementDescriptor:a.descriptors.checkoutFormElementsRoot,gap:3,sx:e=>({padding:e.space.$4}),children:[h&&(0,o.tZ)(u.Alert,{variant:"danger",sx:e=>({animation:"".concat(D.animations.textInBig," ").concat(e.transitionDuration.$slow)}),children:"string"==typeof h?h:h.message}),v.length>0&&(0,o.BX)(o.HY,{children:[(0,o.BX)(u.Disclosure.Root,{open:s,onOpenChange:l,children:[(0,o.tZ)(u.Disclosure.Trigger,{text:"Account Funds"}),(0,o.tZ)(u.Disclosure.Content,{children:(0,o.tZ)(a.Col,{gap:3,children:(0,o.tZ)(T,{paymentSources:v,totalDueNow:t.totals.totalDueNow||t.totals.grandTotal,onPaymentSourceSubmit:C,isSubmitting:m})})})]}),(0,o.tZ)(u.Divider,{})]}),(0,o.BX)(u.Disclosure.Root,{open:d,onOpenChange:p,children:[(0,o.tZ)(u.Disclosure.Trigger,{text:"Add a New Payment Source"}),(0,o.tZ)(u.Disclosure.Content,{children:(0,o.tZ)(L,{totalDueNow:t.totals.totalDueNow||t.totals.grandTotal,onStripeSubmit:w,onExpand:b,isSubmitting:m})})]})]})},T=e=>{let{totalDueNow:t,paymentSources:n,onPaymentSourceSubmit:r,isSubmitting:i}=e,[c,s]=(0,k.useState)(n.length>0?n[0]:void 0),l=(0,k.useMemo)(()=>n.map(e=>({value:e.id,label:"".concat(e.cardType," ⋯ ").concat(e.last4)})),[n]);return(0,o.BX)(a.Form,{onSubmit:r,sx:e=>({display:"flex",flexDirection:"column",rowGap:e.space.$3}),children:[(0,o.BX)(u.Select,{elementId:"role",options:l,value:(null==c?void 0:c.id)||null,onChange:e=>{s(n.find(t=>t.id===e.value))},portal:!0,children:[(0,o.tZ)("input",{name:"payment_source_id",type:"hidden",value:null==c?void 0:c.id}),(0,o.tZ)(u.SelectButton,{icon:w.OG,sx:e=>({justifyContent:"space-between",backgroundColor:e.colors.$colorBackground}),children:c&&(0,o.BX)(a.Flex,{gap:3,align:"center",children:[(0,o.tZ)(a.Icon,{icon:w.aB}),(0,o.BX)(a.Text,{as:"span",colorScheme:"body",children:[c.cardType," ⋯ ",c.last4]})]})}),(0,o.tZ)(u.SelectOptionList,{sx:e=>({paddingBlock:e.space.$1,color:e.colors.$colorText})})]}),(0,o.BX)(a.Button,{type:"submit",colorScheme:"primary",size:"sm",textVariant:"buttonLarge",sx:{width:"100%"},isLoading:i,children:["Pay ",t.currencySymbol,t.amountFormatted]})]})},L=e=>{let{totalDueNow:t,onStripeSubmit:n,onExpand:r,isSubmitting:i}=e,[c,u]=(0,k.useState)(!0);return(0,k.useEffect)(()=>{c||r()},[c,r]),(0,o.BX)(a.Form,{onSubmit:n,sx:e=>({display:"flex",flexDirection:"column",rowGap:e.space.$3}),children:[(0,o.tZ)(a.Button,{elementId:a.descriptors.button.setId("paypal"),variant:"unstyled",size:"md",textVariant:"buttonLarge",block:!0,sx:{backgroundColor:"#FFC43A",color:"#222D65"},children:"Pay with PayPal"}),c?(0,o.BX)(o.HY,{children:[(0,o.tZ)(a.Button,{elementId:a.descriptors.button.setId("applePay"),variant:"unstyled",size:"md",textVariant:"buttonLarge",sx:{width:"100%",backgroundColor:"black",color:"white"},children:"Pay with ApplePay"}),(0,o.tZ)(a.Button,{elementId:a.descriptors.button.setId("gPay"),variant:"unstyled",size:"md",textVariant:"buttonLarge",block:!0,sx:{backgroundColor:"black",color:"white"},children:"Pay with GPay"}),(0,o.tZ)(a.Button,{colorScheme:"secondary",variant:"bordered",size:"md",textVariant:"buttonLarge",block:!0,onClick:()=>u(!1),children:"More Payment Methods"})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(I.PaymentElement,{}),(0,o.BX)(a.Button,{type:"submit",colorScheme:"primary",size:"sm",textVariant:"buttonLarge",block:!0,isLoading:i,children:["Pay ",t.currencySymbol,t.amountFormatted]})]})]})},A=e=>{let{planId:t,planPeriod:n}=e,r=(0,k.useRef)(null),[i,u]=(0,k.useState)(null),{__experimental_commerceSettings:s}=(0,c.useEnvironment)(),{checkout:l,updateCheckout:d,isLoading:p}=(0,E.Mg)({planId:t,planPeriod:n});return((0,k.useEffect)(()=>{!r.current&&(null==l?void 0:l.externalGatewayId)&&s.stripePublishableKey&&(r.current=C(s.stripePublishableKey,{stripeAccount:l.externalGatewayId}),r.current.then(e=>{u(e)}))},[null==l?void 0:l.externalGatewayId,s]),p)?(0,o.tZ)(a.Spinner,{sx:{margin:"auto"}}):l?(null==l?void 0:l.status)==="completed"?(0,o.tZ)(x,{checkout:l}):(0,o.tZ)(O,{stripe:i,checkout:l,onCheckoutComplete:d}):(0,o.tZ)(o.HY,{children:(0,o.tZ)(a.Alert,{colorScheme:"danger",sx:{margin:"auto"},children:"There was a problem, please try again later."})})},R=e=>(0,o.tZ)(a.Flow.Root,{flow:"checkout",children:(0,o.tZ)(a.Flow.Part,{children:(0,o.tZ)(s.Switch,{children:(0,o.tZ)(s.Route,{children:(0,o.tZ)(_,{...e})})})})}),_=(0,c.withCoreUserGuard)(e=>{let{mode:t="mounted",isOpen:n=!1,setIsOpen:r=()=>{}}=(0,c.useCheckoutContext)();return(0,o.BX)(u.Drawer.Root,{open:n,onOpenChange:r,strategy:"mounted"===t?"fixed":"absolute",portalProps:{id:"modal"===t?i.TD:void 0},children:[(0,o.tZ)(u.Drawer.Overlay,{}),(0,o.BX)(u.Drawer.Content,{children:[(0,o.tZ)(u.Drawer.Header,{title:"Checkout"}),(0,o.tZ)(A,{...e})]})]})})},9386:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=o){var i=[],c=!0,a=!1;try{for(o=o.call(e);!(c=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);c=!0);}catch(e){a=!0,r=e}finally{try{c||null==o.return||o.return()}finally{if(a)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u,s,l,d,p,m={exports:{}};m.exports=(function(){if(p)return d;p=1;var e=l?s:(l=1,s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,d=function(){function r(t,n,r,o,i,c){if(c!==e){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function o(){return r}r.isRequired=r;var i={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}})()();var f=(u=m.exports)&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,h=function(e,n,r){var o=!!r,i=t.useRef(r);t.useEffect(function(){i.current=r},[r]),t.useEffect(function(){if(!o||!e)return function(){};var t=function(){i.current&&i.current.apply(i,arguments)};return e.on(n,t),function(){e.off(n,t)}},[o,n,e,i])},y=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},g=function(e){return null!==e&&"object"===o(e)},v="[object Object]",b=function e(t,n){if(!g(t)||!g(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===v;if(o!==(Object.prototype.toString.call(n)===v))return!1;if(!o&&!r)return t===n;var i=Object.keys(t),c=Object.keys(n);if(i.length!==c.length)return!1;for(var a={},u=0;u<i.length;u+=1)a[i[u]]=!0;for(var s=0;s<c.length;s+=1)a[c[s]]=!0;var l=Object.keys(a);return l.length===i.length&&l.every(function(r){return e(t[r],n[r])})},S=function(e,t,n){return g(e)?Object.keys(e).reduce(function(o,c){var a=!g(t)||!b(e[c],t[c]);return n.includes(c)?(a&&console.warn("Unsupported prop change: options.".concat(c," is not a mutable property.")),o):a?r(r({},o||{}),{},i({},c,e[c])):o},null):null},C="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;if(null===e||g(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(t)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;if(g(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return k(e,t)})};var n=k(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},w=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},x=t.createContext(null);x.displayName="ElementsContext";var P=function(e,t){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},B=function(e){var n=e.stripe,r=e.options,o=e.children,i=t.useMemo(function(){return E(n)},[n]),a=c(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(r):null}}),2),u=a[0],s=a[1];t.useEffect(function(){var e=!0,t=function(e){s(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==i.tag||u.stripe?"sync"!==i.tag||u.stripe||t(i.stripe):i.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[i,u,r]);var l=y(n);t.useEffect(function(){null!==l&&l!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[l,n]);var d=y(r);return t.useEffect(function(){if(u.elements){var e=S(r,d,["clientSecret","fonts"]);e&&u.elements.update(e)}},[r,d,u.elements]),t.useEffect(function(){w(u.stripe)},[u.stripe]),t.createElement(x.Provider,{value:u},o)};B.propTypes={stripe:f.any,options:f.object};var I=function(e){return P(t.useContext(x),e)},D=function(e){return(0,e.children)(I("mounts <ElementsConsumer>"))};D.propTypes={children:f.func.isRequired};var Z=["on","session"],O=t.createContext(null);O.displayName="CheckoutSdkContext";var j=function(e,t){if(!e)throw Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},T=t.createContext(null);T.displayName="CheckoutContext";var L=function(e,t){if(!e)return null;e.on,e.session;var n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Z);return t?r(r({},n),t):r(r({},n),e.session())},A=function(e){var n=e.stripe,r=e.options,o=e.children,i=t.useMemo(function(){return E(n,"Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),a=c(t.useState(null),2),u=a[0],s=a[1],l=c(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,checkoutSdk:null}}),2),d=l[0],p=l[1],m=function(e,t){p(function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}})},f=t.useRef(!1);t.useEffect(function(){var e=!0;return"async"!==i.tag||d.stripe?"sync"===i.tag&&i.stripe&&!f.current&&(f.current=!0,i.stripe.initCheckout(r).then(function(e){e&&(m(i.stripe,e),e.on("change",s))})):i.stripePromise.then(function(t){t&&e&&!f.current&&(f.current=!0,t.initCheckout(r).then(function(e){e&&(m(t,e),e.on("change",s))}))}),function(){e=!1}},[i,d,r,s]);var h=y(n);t.useEffect(function(){null!==h&&h!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[h,n]);var v=y(r);t.useEffect(function(){if(d.checkoutSdk){!r.clientSecret||g(v)||b(r.clientSecret,v.clientSecret)||console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var e,t,n=null==v?void 0:null===(e=v.elementsOptions)||void 0===e?void 0:e.appearance,o=null==r?void 0:null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance;o&&!b(o,n)&&d.checkoutSdk.changeAppearance(o)}},[r,v,d.checkoutSdk]),t.useEffect(function(){w(d.stripe)},[d.stripe]);var S=t.useMemo(function(){return L(d.checkoutSdk,u)},[d.checkoutSdk,u]);return d.checkoutSdk?t.createElement(O.Provider,{value:d},t.createElement(T.Provider,{value:S},o)):null};A.propTypes={stripe:f.any,options:f.shape({clientSecret:f.string.isRequired,elementsOptions:f.object}).isRequired};var R=function(e){var n=t.useContext(O),r=t.useContext(x);if(n&&r)throw Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?j(n,e):P(r,e)},_=function(e,n){var r="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),o=n?function(e){R("mounts <".concat(r,">"));var n=e.id,o=e.className;return t.createElement("div",{id:n,className:o})}:function(n){var o,i=n.id,a=n.className,u=n.options,s=void 0===u?{}:u,l=n.onBlur,d=n.onFocus,p=n.onReady,m=n.onChange,f=n.onEscape,g=n.onClick,v=n.onLoadError,b=n.onLoaderStart,C=n.onNetworksChange,k=n.onConfirm,E=n.onCancel,w=n.onShippingAddressChange,x=n.onShippingRateChange,P=R("mounts <".concat(r,">")),B="elements"in P?P.elements:null,I="checkoutSdk"in P?P.checkoutSdk:null,D=c(t.useState(null),2),Z=D[0],O=D[1],j=t.useRef(null),T=t.useRef(null);h(Z,"blur",l),h(Z,"focus",d),h(Z,"escape",f),h(Z,"click",g),h(Z,"loaderror",v),h(Z,"loaderstart",b),h(Z,"networkschange",C),h(Z,"confirm",k),h(Z,"cancel",E),h(Z,"shippingaddresschange",w),h(Z,"shippingratechange",x),h(Z,"change",m),p&&(o="expressCheckout"===e?p:function(){p(Z)}),h(Z,"ready",o),t.useLayoutEffect(function(){if(null===j.current&&null!==T.current&&(B||I)){var t=null;I?t=I.createElement(e,s):B&&(t=B.create(e,s)),j.current=t,O(t),t&&t.mount(T.current)}},[B,I,s]);var L=y(s);return t.useEffect(function(){if(j.current){var e=S(s,L,["paymentRequest"]);e&&"update"in j.current&&j.current.update(e)}},[s,L]),t.useLayoutEffect(function(){return function(){if(j.current&&"function"==typeof j.current.destroy)try{j.current.destroy(),j.current=null}catch(e){}}},[]),t.createElement("div",{id:i,className:a,ref:T})};return o.propTypes={id:f.string,className:f.string,onChange:f.func,onBlur:f.func,onFocus:f.func,onReady:f.func,onEscape:f.func,onClick:f.func,onLoadError:f.func,onLoaderStart:f.func,onNetworksChange:f.func,onConfirm:f.func,onCancel:f.func,onShippingAddressChange:f.func,onShippingRateChange:f.func,options:f.object},o.displayName=r,o.__elementType=e,o},N="undefined"==typeof window,X=t.createContext(null);X.displayName="EmbeddedCheckoutProviderContext";var F=function(){var e=t.useContext(X);if(!e)throw Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},$=N?function(e){var n=e.id,r=e.className;return F(),t.createElement("div",{id:n,className:r})}:function(e){var n=e.id,r=e.className,o=F().embeddedCheckout,i=t.useRef(!1),c=t.useRef(null);return t.useLayoutEffect(function(){return!i.current&&o&&null!==c.current&&(o.mount(c.current),i.current=!0),function(){if(i.current&&o)try{o.unmount(),i.current=!1}catch(e){}}},[o]),t.createElement("div",{ref:c,id:n,className:r})},M=_("auBankAccount",N),Y=_("card",N),U=_("cardNumber",N),G=_("cardExpiry",N),W=_("cardCvc",N),q=_("fpxBank",N),z=_("iban",N),H=_("idealBank",N),V=_("p24Bank",N),K=_("epsBank",N),J=_("payment",N),Q=_("expressCheckout",N),ee=_("currencySelector",N),et=_("paymentRequestButton",N),en=_("linkAuthentication",N),er=_("address",N),eo=_("shippingAddress",N),ei=_("paymentMethodMessaging",N),ec=_("affirmMessage",N),ea=_("afterpayClearpayMessage",N);e.AddressElement=er,e.AffirmMessageElement=ec,e.AfterpayClearpayMessageElement=ea,e.AuBankAccountElement=M,e.CardCvcElement=W,e.CardElement=Y,e.CardExpiryElement=G,e.CardNumberElement=U,e.CheckoutProvider=A,e.CurrencySelectorElement=ee,e.Elements=B,e.ElementsConsumer=D,e.EmbeddedCheckout=$,e.EmbeddedCheckoutProvider=function(e){var n=e.stripe,r=e.options,o=e.children,i=t.useMemo(function(){return E(n,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[n]),a=t.useRef(null),u=t.useRef(null),s=c(t.useState({embeddedCheckout:null}),2),l=s[0],d=s[1];t.useEffect(function(){if(!u.current&&!a.current){var e=function(e){u.current||a.current||(u.current=e,a.current=u.current.initEmbeddedCheckout(r).then(function(e){d({embeddedCheckout:e})}))};"async"===i.tag&&!u.current&&(r.clientSecret||r.fetchClientSecret)?i.stripePromise.then(function(t){t&&e(t)}):"sync"===i.tag&&!u.current&&(r.clientSecret||r.fetchClientSecret)&&e(i.stripe)}},[i,r,l,u]),t.useEffect(function(){return function(){l.embeddedCheckout?(a.current=null,l.embeddedCheckout.destroy()):a.current&&a.current.then(function(){a.current=null,l.embeddedCheckout&&l.embeddedCheckout.destroy()})}},[l.embeddedCheckout]),t.useEffect(function(){w(u)},[u]);var p=y(n);t.useEffect(function(){null!==p&&p!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[p,n]);var m=y(r);return t.useEffect(function(){if(null!=m){if(null==r){console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them.");return}void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=m.clientSecret&&r.clientSecret!==m.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.fetchClientSecret&&r.fetchClientSecret!==m.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.onComplete&&r.onComplete!==m.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=m.onShippingDetailsChange&&r.onShippingDetailsChange!==m.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=m.onLineItemsChange&&r.onLineItemsChange!==m.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")}},[m,r]),t.createElement(X.Provider,{value:l},o)},e.EpsBankElement=K,e.ExpressCheckoutElement=Q,e.FpxBankElement=q,e.IbanElement=z,e.IdealBankElement=H,e.LinkAuthenticationElement=en,e.P24BankElement=V,e.PaymentElement=J,e.PaymentMethodMessagingElement=ei,e.PaymentRequestButtonElement=et,e.ShippingAddressElement=eo,e.useCheckout=function(){e="calls useCheckout()",j(t.useContext(O),e);var e,n=t.useContext(T);if(!n)throw Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return n},e.useElements=function(){return I("calls useElements()").elements},e.useStripe=function(){return R("calls useStripe()").stripe}}(t,n(9144))}}]);