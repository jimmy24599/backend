Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getReadStates = void 0;
var getReadStates = exports.getReadStates = function getReadStates(messages, read, returnAllReadData) {
  var readData = {};
  if (read) {
    Object.values(read).forEach(function (readState) {
      if (!readState.last_read) {
        return;
      }
      var userLastReadMsgId;
      messages.forEach(function (msg) {
        if (msg.created_at && msg.created_at < readState.last_read) {
          userLastReadMsgId = msg.id;
          if (returnAllReadData) {
            if (!readData[userLastReadMsgId]) {
              readData[userLastReadMsgId] = 0;
            }
            readData[userLastReadMsgId] = readData[userLastReadMsgId] + 1;
          }
        }
      });
      if (userLastReadMsgId && !returnAllReadData) {
        if (!readData[userLastReadMsgId]) {
          readData[userLastReadMsgId] = 0;
        }
        readData[userLastReadMsgId] = readData[userLastReadMsgId] + 1;
      }
    });
  }
  return readData;
};
//# sourceMappingURL=getReadStates.js.map