{"version":3,"names":["_mapMessageToStorable","require","_mapPollToStorable","_mapReactionToStorable","_mapUserToStorable","_createUpsertQuery","_SqliteClient","upsertMessages","exports","_ref2","_asyncToGenerator2","_regenerator","mark","_callee","_ref","_ref$flush","flush","messages","storableMessages","storableUsers","storableReactions","storablePolls","finalQueries","wrap","_callee$","_context","prev","next","forEach","message","push","mapMessageToStorable","user","mapUserToStorable","concat","_toConsumableArray2","latest_reactions","own_reactions","r","mapReactionToStorable","poll","mapPollToStorable","map","storableMessage","createUpsertQuery","storableUser","storableReaction","storablePoll","SqliteClient","logger","polls","reactions","users","executeSqlBatch","abrupt","stop","_x","apply","arguments"],"sourceRoot":"../../../../src","sources":["store/apis/upsertMessages.ts"],"mappings":";;;;;;;;AAEA,IAAAA,qBAAA,GAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AACA,IAAAE,sBAAA,GAAAF,OAAA;AACA,IAAAG,kBAAA,GAAAH,OAAA;AACA,IAAAI,kBAAA,GAAAJ,OAAA;AACA,IAAAK,aAAA,GAAAL,OAAA;AAEO,IAAMM,cAAc,GAAAC,OAAA,CAAAD,cAAA;EAAA,IAAAE,KAAA,OAAAC,kBAAA,aAAAC,YAAA,YAAAC,IAAA,CAAG,SAAAC,QAAAC,IAAA;IAAA,IAAAC,UAAA,EAAAC,KAAA,EAAAC,QAAA,EAAAC,gBAAA,EAAAC,aAAA,EAAAC,iBAAA,EAAAC,aAAA,EAAAC,YAAA;IAAA,OAAAX,YAAA,YAAAY,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAZ,UAAA,GAAAD,IAAA,CAC5BE,KAAK,EAALA,KAAK,GAAAD,UAAA,cAAG,IAAI,GAAAA,UAAA,EACZE,QAAQ,GAAAH,IAAA,CAARG,QAAQ;UAKFC,gBAAgE,GAAG,EAAE;UACrEC,aAA0D,GAAG,EAAE;UAC/DC,iBAAkE,GAAG,EAAE;UACvEC,aAA0D,GAAG,EAAE;UAErEJ,QAAQ,YAARA,QAAQ,CAAEW,OAAO,CAAC,UAACC,OAAwB,EAAK;YAC9CX,gBAAgB,CAACY,IAAI,CAAC,IAAAC,0CAAoB,EAACF,OAAO,CAAC,CAAC;YACpD,IAAIA,OAAO,CAACG,IAAI,EAAE;cAChBb,aAAa,CAACW,IAAI,CAAC,IAAAG,oCAAiB,EAACJ,OAAO,CAACG,IAAI,CAAC,CAAC;YACrD;YACA,GAAAE,MAAA,KAAAC,mBAAA,aAAKN,OAAO,CAACO,gBAAgB,IAAI,EAAE,OAAAD,mBAAA,aAAON,OAAO,CAACQ,aAAa,IAAI,EAAE,GAAGT,OAAO,CAAC,UAACU,CAAC,EAAK;cACrF,IAAIA,CAAC,CAACN,IAAI,EAAE;gBACVb,aAAa,CAACW,IAAI,CAAC,IAAAG,oCAAiB,EAACK,CAAC,CAACN,IAAI,CAAC,CAAC;cAC/C;cACAZ,iBAAiB,CAACU,IAAI,CAAC,IAAAS,4CAAqB,EAACD,CAAC,CAAC,CAAC;YAClD,CAAC,CAAC;YACF,IAAIT,OAAO,CAACW,IAAI,EAAE;cAChBnB,aAAa,CAACS,IAAI,CAAC,IAAAW,oCAAiB,EAACZ,OAAO,CAACW,IAAI,CAAC,CAAC;YACrD;UACF,CAAC,CAAC;UAEIlB,YAAY,MAAAY,MAAA,KAAAC,mBAAA,aACbjB,gBAAgB,CAACwB,GAAG,CAAC,UAACC,eAAe;YAAA,OAAK,IAAAC,oCAAiB,EAAC,UAAU,EAAED,eAAe,CAAC;UAAA,EAAC,OAAAR,mBAAA,aACzFhB,aAAa,CAACuB,GAAG,CAAC,UAACG,YAAY;YAAA,OAAK,IAAAD,oCAAiB,EAAC,OAAO,EAAEC,YAAY,CAAC;UAAA,EAAC,OAAAV,mBAAA,aAC7Ef,iBAAiB,CAACsB,GAAG,CAAC,UAACI,gBAAgB;YAAA,OACxC,IAAAF,oCAAiB,EAAC,WAAW,EAAEE,gBAAgB,CAAC;UAAA,CAClD,CAAC,OAAAX,mBAAA,aACEd,aAAa,CAACqB,GAAG,CAAC,UAACK,YAAY;YAAA,OAAK,IAAAH,oCAAiB,EAAC,MAAM,EAAEG,YAAY,CAAC;UAAA,EAAC;UAGjFC,0BAAY,CAACC,MAAM,YAAnBD,0BAAY,CAACC,MAAM,CAAG,MAAM,EAAE,gBAAgB,EAAE;YAC9CjC,KAAK,EAALA,KAAK;YACLC,QAAQ,EAAEC,gBAAgB;YAC1BgC,KAAK,EAAE7B,aAAa;YACpB8B,SAAS,EAAE/B,iBAAiB;YAC5BgC,KAAK,EAAEjC;UACT,CAAC,CAAC;UAAC,KAECH,KAAK;YAAAS,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OACDqB,0BAAY,CAACK,eAAe,CAAC/B,YAAY,CAAC;QAAA;UAAA,OAAAG,QAAA,CAAA6B,MAAA,WAG3ChC,YAAY;QAAA;QAAA;UAAA,OAAAG,QAAA,CAAA8B,IAAA;MAAA;IAAA,GAAA1C,OAAA;EAAA,CACpB;EAAA,gBAlDYN,cAAcA,CAAAiD,EAAA;IAAA,OAAA/C,KAAA,CAAAgD,KAAA,OAAAC,SAAA;EAAA;AAAA,GAkD1B","ignoreList":[]}
