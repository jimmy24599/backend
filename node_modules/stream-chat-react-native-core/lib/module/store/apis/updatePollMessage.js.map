{"version":3,"names":["_streamChat","require","_mapPollToStorable","_mapStorableToPoll","_createSelectQuery","_createUpdateQuery","_SqliteClient","_createForOfIteratorHelper","r","e","t","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","_n","F","s","n","done","value","f","TypeError","o","a","u","call","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","updatePollMessage","exports","_ref2","_asyncToGenerator2","_regenerator","mark","_callee","_ref","eventType","_ref$flush","flush","poll","poll_vote","userID","queries","pollsFromDB","_iterator","_step","_poll_vote$user","pollFromDB","serializedPoll","_serializedPoll$lates","latest_answers","_serializedPoll$own_v","own_votes","newOwnVotes","newLatestAnswers","storablePoll","wrap","_callee$","_context","prev","SqliteClient","executeSql","apply","createSelectQuery","id","sent","mapStorableToPoll","user","filter","vote","concat","_toConsumableArray2","isVoteAnswer","answer","mapPollToStorable","Object","assign","push","createUpdateQuery","logger","err","executeSqlBatch","abrupt","stop","_x","arguments"],"sourceRoot":"../../../../src","sources":["store/apis/updatePollMessage.ts"],"mappings":"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","ignoreList":[]}
