{"version":3,"names":["_mapMessageToStorable","require","_mapReactionToStorable","_mapUserToStorable","_createDeleteQuery","_createSelectQuery","_createUpdateQuery","_createUpsertQuery","_SqliteClient","updateMessage","exports","_ref2","_asyncToGenerator2","_regenerator","mark","_callee","_ref","_ref$flush","flush","message","queries","messages","storableMessage","storableUsers","storableUser","latestReactions","ownReactions","storableReactions","wrap","_callee$","_context","prev","next","SqliteClient","executeSql","apply","createSelectQuery","id","sent","length","abrupt","mapMessageToStorable","Object","assign","push","createUpdateQuery","user","mapUserToStorable","createUpsertQuery","createDeleteQuery","messageId","latest_reactions","own_reactions","concat","_toConsumableArray2","forEach","r","storableReaction","mapReactionToStorable","logger","reactions","users","executeSqlBatch","stop","_x","arguments"],"sourceRoot":"../../../../src","sources":["store/apis/updateMessage.ts"],"mappings":"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","ignoreList":[]}
